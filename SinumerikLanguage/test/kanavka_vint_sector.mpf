N1 R1=16 ;RADIUS SFERI
N2 R2=3; RADIUS SKRUGL
N3 R3=19 ;RADIUS KONAVKI
N4 R4=60 ;UGOL SEKTORA
N5 R5=2 ;UGLOVOI SHAG
N6 R5=R4/(1+TRUNC(R4/R5))
N7 R6=5 ;CHISLO VITKOV
N8 R7=60 ;SEKTOR OBRABOTKI
N9 R17=0.5; SHAG NA SEKTORE OBRABOTKI
N10 R17=R7/(1+TRUNC(R7/R17))
N11 R8=38 ;SHAG
N12 R9=993.5 ;NARUJN RADIUS
N13 R14=11 ;GLUBINA KANAVKI

N14 T1 D1 M6

N15 G90 G17 G54

N16 G0 Y=R8/2 X0
N17 Z1200 

N18 S1200 M3 M8

N19 G1 Z=R9 F500
N20 R16=-R17

N21 METKA5:
N22 R16=R16+R17
N23 X=-(R9+R1)*SIN(R7/2-R16)
N24 Y0

N24 R15=0
N25 METKA4:


N26 ;R3
N27 R10=-R5
N28 METKA1:
N29 R10=R10+R5
N30 R11=R8/2-(R1+R2)*SIN(R10)-R8*R16/360
N31 R12=(R9+(R1+R2)*COS(R10)-R2)*COS(R7/2-R16)-R1
N32 G1 Y=R11-R15*R8 Z=R12 F1000
N33 IF R10<(R7-0.5*R5) GOTOB METKA1
;println("metka1")

N34 ;R19
N35 R10=R4
N36 METKA2:
N37 R10=R10-R5
N38 R11=(R3-R1)*SIN(R10)-R8*R16/360
N39 R12=(R9-R14-(R3-R1)*COS(R10)+R3)*COS(R7/2-R16)-R1
N40 G1 Y=R11-R15*R8 Z=R12 F1000
N41 IF R10>(0.5*R5-R7) GOTOB METKA2
;println("metka2")

N42 ;R3
N43 R10=0
N44 METKA3:
N45 R10=R10+R5
N46 R11=-R8/2+(R1+R2)*SIN(R4-R10)-R8*R16/360
N47 R12=(R9+(R1+R2)*COS(R4-R10)-R2)*COS(R7/2-R16)-R1
N48 G1 Y=R11-R15*R8 Z=R12 F1000
N49 IF R10<(R4-0.5*R5) GOTOB METKA3
;println("metka3")

N50 R15=R15+1
N51 IF R15<R6 GOTOB METKA4
G1 Z1100 F5000

N52 IF R16<(R7*2-0.5*R17) GOTOB METKA5
N53 
N54 M5 M9
N55 M30